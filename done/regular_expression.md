# 正则表达式

## 匹配

- `+`代表前面的字符必须至少出现一次（1次或多次）
  - runoo+b，可以匹配 runoob、runooob、runoooooob 等
- `*` 代表前面的字符可以不出现，也可以出现一次或者多次（0次、或1次、或多次）
  - runoo*b，可以匹配 runob、runoob、runoooooob 等
- `?` 代表前面的字符最多只可以出现一次（0次或1次）
  - colou?r 可以匹配 color 或者 colour
- `[ABC]` 匹配[...]中的所有字符，但只表示一个字符
  - [aeiou] g**oo**gl**e** run**oo**b t**ao**b**ao**
- `[^ABC]` 匹配除了[...]中字符的所有字符
  - `[^aeiou]` **g**oo**gl**e **run**oo**b t**ao**b**ao
- `[A-Z]` 表示一个区间，匹配所有大写字母，`[a-z]` 匹配所有小写字母
- `.` 匹配除换行符外的任何单个字符，等价于`[^\n\r]`
- `[\s]` 匹配所有空白符 `[\S]` 非空白符 `[\s\S]` 匹配所有
- `[\w]` 匹配字母、数字、下划线，等价于`[A-Za-z0-9_]`
- `{n}` 匹配确定的n次；`{n,}` 至少匹配n次；`{n,m}` 至少匹配n次，最多匹配m次

| 正则表达式 | instance | instance2 |
|:---:|:---:|:---:|
|`[o{2}]`|Bob|f**oo**d|
|`[o{2,}]`|Bob|f**ooooo**d|
|`[o{1,3}]`|B**o**b|f**ooo**ood|

- `[1-9][0-9]*` 正整数
- \* 和 + 限定符都是贪婪的，它们会尽可能多的匹配文字，在它们的后面加上一个 ? 就可以实现非贪婪或最小匹配。
- `<.*>`匹配从"<"到">"的全部内容,可以跨越>
- `<.*?>`匹配从"<"到">"的全部内容,不可以跨越>

## 定位符

- \^匹配输入字符串开始的位置，在表达式的开始处使用
- \$匹配输入字符串结尾的位置，在表达式的结尾处使用
- \b匹配一个单词的前或后边界，\B表示非单词边界
- 不能将限定符和定位符一起使用，比如^*
- ^不要和括号内的用法混淆
- 单词边界是单词和空格之间的位置，非单词边界是任何其他位置。`\bCha`匹配**Cha**pter，`ter\b`匹配Chap**ter**，`\Bapt`匹配Ch**apt**er，但不匹配aptitude中的apt

## 选择

- 用圆括号把所有选项括起来，相邻选项用|分隔
- ()表示捕获分组，把每个分组里匹配的值保存起来，多个匹配值可以通过索引查看，比如`\1`，如果不想缓存相关匹配，可以在第一个选项前加`?:`,`?:,?=,?!`是非捕获元

## 先行断言和后行断言

- `?=,?!,?<=,?<!`代表的是一个零宽的位置
- `(?=pattern)`代表字符串中的一个位置，紧接该位置**之后**的字符串**可以匹配**pattern
- `(?!pattern)`代表字符串中的一个位置，紧接该位置**之后**的字符串**不能匹配**pattern
- `(?<=pattern)`代表字符串中的一个位置，紧接该位置**之前**的字符串**可以匹配**pattern
- `(?<!pattern)`代表字符串中的一个位置，紧接该位置之**之前**的字符串**不能匹配**pattern

## 修饰符（标记）

- 标记位于正则表达式之外，用于指定额外的匹配策略
- i：也就是ignore，不区分大小写
- g：global，全局匹配，默认查找第一次匹配，加上g修饰符后查找所有匹配项（但还是单行）
- m：multi line，多行匹配，使边界字符^和$匹配每一行的开头和结尾，而不是整个字符串的开头和结尾
- s：默认情况下`.`代表除换行符的全部字符，加上s修饰符后，`.`代表全部字符
